# 2024TICup-Repo
> 基于实验室发的stm32f103单片机，涉及到屏幕的话都是ILI9341，触屏都是XPT2046

参加2024年浙江省电赛期间的一些乱七八糟的东西，大部分都是自己写的内容<del>（没啥营养）</del>

硬件部分由队友完成，基本没参与，所以就一笔带过了~

<del>看完这些内容我觉得我可真是我们组的摸鱼王</del>

大致目录如下：

## 单片机FFT库及相关算法

github好像渲染不了md的数学公式？如果需要的话麻烦自己下载渲染一下（

理论分析：理论上加窗能够得到更精准的结果，但实测不知为何误差很大，偷懒没debug而是直接不加窗了

代码实现：详见2021A题，写一次fft用了一个月（

## 做的历年真题

千变万变离不开一个fft，然而省赛还真就没用（bushi）

### 2021-A 信号失真度测量装置

最后的方案是程控PGA113（实际上112也够用）+stm32的ADC单通道采样。文件只放了我写的部分（嗯对的，某人不会写串口通信所以是组长亲自下场来写的(/▽＼)）

### 2019-D 简易电路特性测试仪

其实主要工作在模拟部分，单片机只需要控制一块AD9833（是的，梅开二度继续感谢组长），然后疯狂读取数据进行条件判断就好了。

这里还用到了触摸屏方便操作（帽子戏法感谢组长），我的贡献是修了一个bug（doge）

### 2023-H 信号分离装置

因为题目要求比较清晰，所以分离两路信号并不难，我偷懒用的方案是判断基波的幅度：正弦1Vpp，三角约0.81Vpp。

重现信号的话，我们用了两块AD9833（嗯，继续感谢组长），方法就是隔一小段时间测两路信号的相位差变化情况，然后反向微调AD芯片的频率，最后的结果是两路信号会缓慢的错位。
